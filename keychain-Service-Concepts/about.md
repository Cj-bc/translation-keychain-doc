
# キーチェーンサービスのコンセプト

ユーザーは、通常、IDとパスワードを使用してログインするアカウントを複数管理します。セキュアなFTPサーバー、アップルシェアサーバー、データベースサーバー、セキュアなwebサイト、インスタントメッセージのアカウント、その他様々なサービスが認証を必要とします。
ユーザーは普通、シンプルで覚えやすいパスワードを使ったり、同じパスワードを何度も使ったり、簡単に見つけられるところにパスワードを書くことで対応します。どれも、セキュリティレベルを下げる行動です。

キーチェーンサービスAPIは、この問題に対して解決策を提示します。このAPIを一度呼び出すことで、アプリは小さな機密情報をキーチェーン上に、後にアプリが同じように一度の呼び出しで再取得できるようなところに、保管することができます。
キーチェーンは、データをファイルシステムに保存する前に暗号化することで、複雑な暗号化アルゴリズムを実行する手間を省きながら安全にデータを保管します。システムは又、保管された項目へのアクセスを慎重に制御します。キーチェーン全体をロックすることもできます。つまり、マスターパスワードを使って解除されるまでは、誰も保護された中身を復号化することはできないということです。ロックされていないキーチェーンだとしても、システムのキーチェーンアクセスポリシーが、認証されたアプリだけがキーチェーンに保存された項目にアクセスできることを保証します。一番簡単な例で言うと、項目を作成したアプリだけがその項目に後からアクセスすることができます。
しかしながら、キーチェーンサービスはアプリ間で機密を共有する方法も提供しています。

ユーザーの観点からすると、キーチェーンは透過的な（内部を意識する必要のない）認証を提供します。（キーチェーンをアンロックした後は）ユーザーはキーチェーンにパスワードガ保存されているサービスそれぞれにログインする必要がありません。認証されたアプリケーションは、ユーザーに確認をすることなくそれらを取得することができます。これにより、それらを覚えることや、安全ではない場所に記録する必要なく不規則で複雑、セキュリティ面からして価値のあるパスワードを使うことができます。
 [Figure 1-1](https://developer.apple.com/library/content/documentation/Security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-CJBBFJHD)はユーザーとキーチェーン、そしてパスワードで保護されたサービスの関係図です。

(1-1 イメージ)
+-------------------------------------------------------+
|                                                       |
|ユーザーがキーチェーンをアンロックするパスワードを入力 |
|                                                       |
+-------------------------------------------------------+
          /     \
         /       \
        +----------+  +---------------------------------------------------+ 
        | keychain |  | 信頼されたアプリケーションは、keychainに保存された|
        +----------+  | パスワードやその他機密にアクセスできます。        |
           ||=======> +---------------------------------------------------+

パスワードに加えて、暗号鍵や証明書、macOSならさらに文字列も保存できます。鍵や証明書の作り方および管理などに関する詳しい情報は、[Certificate, Key, and Trust Services(外部リンク)](https://developer.apple.com/documentation/security/certificate_key_and_trust_services)を参照してください。



